import{_ as A}from"./AdminLayout.a967bfb7.js";import{q as D}from"./index.daf4e683.js";import{_ as q}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as O}from"./UploadOutlined.51045c55.js";import{R as T}from"./RestFilled.0825d20b.js";import{C as r,o as s,c as y,w as l,f as i,t as f,a as k,b as n,d as v,F as h,e as x}from"./app.c082a298.js";import"./UserOutlined.2068f525.js";import"./AppstoreOutlined.a785b156.js";const Y={components:{AdminLayout:A,UploadOutlined:O,RestFilled:T,quillEditor:D},props:["bulletinCategories","bulletins"],data(){return{dateFormat:"YYYY-MM-DD",yearCurrent:2023,yearStart:new Date().getFullYear()+1,yearLength:new Date().getFullYear()-2009+2,modal:{isOpen:!1,data:{},title:"\u516C\u544A",mode:""},pagination:{total:this.bulletins.total,current:this.bulletins.current_page,pageSize:this.bulletins.per_page},filter:{},columns:[{title:"\u5206\u985E",dataIndex:"category",width:100},{title:"\u5E74\u4EFD",dataIndex:"year"},{title:"\u65E5\u671F",dataIndex:"date"},{title:"\u6A19\u984C",dataIndex:"title"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{field:{required:!0},label:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(o){this.modal.data={},this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(o){this.modal.data={...o},this.modal.mode="EDIT",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.bulletins.store"),this.modal.data,{onSuccess:o=>{this.modal.isOpen=!1},onError:o=>{console.log(o)}})}).catch(o=>{console.log(o)})},updateRecord(){this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("admin.bulletins.update",this.modal.data.id),this.modal.data,{onSuccess:o=>{this.modal.isOpen=!1},onError:o=>{console.log(o)}})}).catch(o=>{console.log("error",o)})},deleteRecord(o){!confirm("Are you sure want to remove?")||this.$inertia.delete(route("admin.forms.destroy",{form:o.id}),{onSuccess:t=>{console.log(t)},onError:t=>{alert(t.message)}})},onPaginationChange(o,t,u){this.$inertia.get(route("admin.bulletins.index"),{page:o.current,per_page:5,filter:"namejose"},{onSuccess:p=>{console.log(p)},onError:p=>{console.log(p)}})}}},B=k("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," \u516C\u544A ",-1);function L(o,t,u,p,e,d){const c=r("a-button"),R=r("a-table"),C=r("a-select"),m=r("a-form-item"),F=r("a-date-picker"),w=r("a-input"),E=r("quill-editor"),S=r("a-form"),I=r("a-modal"),U=r("AdminLayout");return s(),y(U,{title:"Dashboard"},{header:l(()=>[B]),default:l(()=>[i(" "+f(new Date().getFullYear()-2009+1)+" "+f(e.yearLength)+" ",1),k("button",{onClick:t[0]||(t[0]=a=>d.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"},"\u65B0\u589E\u516C\u544A"),n(R,{dataSource:u.bulletins.data,columns:e.columns,pagination:e.pagination,onChange:d.onPaginationChange,ref:"dataTable"},{bodyCell:l(({column:a,text:g,record:b,index:M})=>[a.dataIndex=="operation"?(s(),v(h,{key:0},[n(c,{onClick:_=>d.editRecord(b)},{default:l(()=>[i("\u4FEE\u6539")]),_:2},1032,["onClick"]),n(c,{onClick:_=>d.deleteRecord(b.id)},{default:l(()=>[i("\u522A\u9664")]),_:2},1032,["onClick"])],64)):a.dataIndex=="category"?(s(),v(h,{key:1},[i(f(u.bulletinCategories.find(_=>_.value==g).label),1)],64)):(s(),v(h,{key:2},[i(f(b[a.dataIndex]),1)],64))]),_:1},8,["dataSource","columns","pagination","onChange"]),n(I,{visible:e.modal.isOpen,"onUpdate:visible":t[8]||(t[8]=a=>e.modal.isOpen=a),title:e.modal.title,width:"60%"},{footer:l(()=>[e.modal.mode=="EDIT"?(s(),y(c,{key:"Update",type:"primary",onClick:t[6]||(t[6]=a=>d.updateRecord())},{default:l(()=>[i("Update")]),_:1})):x("",!0),e.modal.mode=="CREATE"?(s(),y(c,{key:"Store",type:"primary",onClick:t[7]||(t[7]=a=>d.storeRecord())},{default:l(()=>[i("Add")]),_:1})):x("",!0)]),default:l(()=>[n(S,{ref:"modalRef",model:e.modal.data,name:"Bulletin","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:l(()=>[n(m,{label:"\u5206\u985E",name:"category"},{default:l(()=>[n(C,{value:e.modal.data.category,"onUpdate:value":t[1]||(t[1]=a=>e.modal.data.category=a),options:u.bulletinCategories},null,8,["value","options"])]),_:1}),n(m,{label:"\u5E74\u4EFD",name:"year"},{default:l(()=>[n(C,{value:e.modal.data.year,"onUpdate:value":t[2]||(t[2]=a=>e.modal.data.year=a),options:[...Array(e.yearLength)].map((a,g)=>({value:e.yearStart-g}))},null,8,["value","options"])]),_:1}),n(m,{label:"\u65E5\u671F",name:"date"},{default:l(()=>[n(F,{value:e.modal.data.date,"onUpdate:value":t[3]||(t[3]=a=>e.modal.data.date=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),n(m,{label:"\u6A19\u984C",name:"title"},{default:l(()=>[n(w,{value:e.modal.data.title,"onUpdate:value":t[4]||(t[4]=a=>e.modal.data.title=a)},null,8,["value"])]),_:1}),n(m,{label:"\u5167\u5BB9",name:"content"},{default:l(()=>[n(E,{value:e.modal.data.content,"onUpdate:value":t[5]||(t[5]=a=>e.modal.data.content=a),style:{"min-height":"200px"}},null,8,["value"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const K=q(Y,[["render",L]]);export{K as default};
