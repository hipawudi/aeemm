import{_ as w}from"./AdminLayout.b1278d3d.js";import{C as p,D as r,o as _,c as f,w as l,a as n,b as o,f as m,d as E,e as v}from"./app.8d6b5d0d.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as I}from"./UploadOutlined.e038a453.js";import{R as O}from"./RestFilled.d8a5daa8.js";import"./UserOutlined.74c238c8.js";import"./AppstoreOutlined.5537e5f8.js";const T={components:{AdminLayout:w,UploadOutlined:I,RestFilled:O},props:["certificates"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"\u8A8D\u8B49\u540D\u7A31",dataIndex:"cert_title"},{title:"\u8A8D\u8B49\u6A5F\u69CB",dataIndex:"cert_body"},{title:"\u8A8D\u8B49\u5167\u5BB9",dataIndex:"cert_content"},{title:"\u7DE8\u865F\u683C\u5F0F",dataIndex:"number_format"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{cert_title:{required:!0},cert_body:{required:!0},number_format:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(d){this.modal.data={},this.modal.data.media=[],this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(d){this.modal.data={...d},this.modal.mode="EDIT",this.modal.title="\u4FEE\u6539",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.certificates.store"),this.modal.data,{preserveState:!1,onSuccess:d=>{this.modal.isOpen=!1,p.success("\u65B0\u589E\u6210\u529F")},onError:d=>{console.log(d),p.error("\u65B0\u589E\u5931\u6557")}})}).catch(d=>{console.log(d)})},updateRecord(){this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("admin.certificates.update",this.modal.data.id),this.modal.data,{preserveState:!1,onSuccess:d=>{p.success("\u4FEE\u6539\u6210\u529F"),this.modal.isOpen=!1},onError:d=>{p.error("\u4FEE\u6539\u6210\u529F"),console.log(d)}})}).catch(d=>{console.log("error",d)})}}},A={class:"md:p-8 pt-8"},S={class:"flex pb-2"},q=n("div",{class:"flex-auto w-1/2 font-semibold text-xl text-gray-800 truncate whitespace-nowrap"}," \u5C08\u696D\u8A8D\u8B49 ",-1),B={class:"flex-auto w-1/2 text-right"},N={class:"container mx-auto pt-5"},V={class:"bg-white relative shadow rounded-lg overflow-x-auto"},D={key:0,class:"space-x-2"};function F(d,t,y,L,e,u){const i=r("a-button"),h=r("a-table"),c=r("a-input"),s=r("a-form-item"),b=r("a-textarea"),C=r("a-form"),k=r("a-modal"),R=r("AdminLayout");return _(),f(R,{title:"\u5C08\u696D\u8A8D\u8B49"},{default:l(()=>[n("div",A,[n("div",S,[q,n("div",B,[o(i,{type:"primary",class:"!rounded",onClick:t[0]||(t[0]=a=>u.createRecord())},{default:l(()=>[m("\u65B0\u589E\u5C08\u696D\u8A8D\u8B49")]),_:1})])]),n("div",N,[n("div",V,[o(h,{dataSource:y.certificates,columns:e.columns},{bodyCell:l(({column:a,record:x})=>[a.dataIndex=="operation"?(_(),E("div",D,[o(i,{onClick:g=>u.editRecord(x)},{default:l(()=>[m("\u4FEE\u6539")]),_:2},1032,["onClick"]),o(i,{onClick:g=>d.deleteRecord(x.id)},{default:l(()=>[m("\u522A\u9664")]),_:2},1032,["onClick"])])):v("",!0)]),_:1},8,["dataSource","columns"])])]),o(k,{visible:e.modal.isOpen,"onUpdate:visible":t[9]||(t[9]=a=>e.modal.isOpen=a),title:e.modal.mode=="CREATE"?"\u65B0\u589E":"\u4FEE\u6539",width:"60%"},{footer:l(()=>[e.modal.mode=="EDIT"?(_(),f(i,{key:"Update",type:"primary",onClick:t[7]||(t[7]=a=>u.updateRecord())},{default:l(()=>[m("\u66F4\u65B0")]),_:1})):v("",!0),e.modal.mode=="CREATE"?(_(),f(i,{key:"Store",type:"primary",onClick:t[8]||(t[8]=a=>u.storeRecord())},{default:l(()=>[m("\u65B0\u589E")]),_:1})):v("",!0)]),default:l(()=>[o(C,{ref:"modalRef",model:e.modal.data,name:"Teacher","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:l(()=>[o(s,{label:"\u8A8D\u8B49\u540D\u7A31",name:"cert_title"},{default:l(()=>[o(c,{value:e.modal.data.cert_title,"onUpdate:value":t[1]||(t[1]=a=>e.modal.data.cert_title=a)},null,8,["value"])]),_:1}),o(s,{label:"\u8A8D\u8B49\u6A5F\u69CB",name:"cert_body"},{default:l(()=>[o(c,{value:e.modal.data.cert_body,"onUpdate:value":t[2]||(t[2]=a=>e.modal.data.cert_body=a)},null,8,["value"])]),_:1}),o(s,{label:"\u8A8D\u8B49\u5167\u5BB9",name:"cert_content"},{default:l(()=>[o(b,{value:e.modal.data.cert_content,"onUpdate:value":t[3]||(t[3]=a=>e.modal.data.cert_content=a)},null,8,["value"])]),_:1}),o(s,{label:"\u7DE8\u865F\u683C\u5F0F",name:"number_format"},{default:l(()=>[o(c,{value:e.modal.data.number_format,"onUpdate:value":t[4]||(t[4]=a=>e.modal.data.number_format=a)},null,8,["value"])]),_:1}),o(s,{label:"\u7B49\u7D1A",name:"rank_caption"},{default:l(()=>[o(c,{value:e.modal.data.rank_caption,"onUpdate:value":t[5]||(t[5]=a=>e.modal.data.rank_caption=a)},null,8,["value"])]),_:1}),o(s,{label:"\u7C21\u4ECB",name:"description"},{default:l(()=>[o(b,{value:e.modal.data.description,"onUpdate:value":t[6]||(t[6]=a=>e.modal.data.description=a)},null,8,["value"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])])]),_:1})}const K=U(T,[["render",F]]);export{K as default};
