import{_ as T}from"./AdminLayout.a967bfb7.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as i,o as m,c as b,w as o,a as n,b as a,f as u,d as c,e as _,F as U,h as q,t as y}from"./app.c082a298.js";import"./UserOutlined.2068f525.js";import"./AppstoreOutlined.a785b156.js";const S={components:{AdminLayout:T},props:["form","fields"],data(){return{optionInput:{},modal:{isOpen:!1,data:{},title:"Modal",mode:""},fieldTypes:[{value:"input",label:"\u55AE\u884C\u6587\u5B57",option:!1},{value:"textarea",label:"\u591A\u884C\u6587\u5B57",option:!1},{value:"largetext",label:"\u5927\u7BC7\u5E45\u6587\u5B57",option:!1},{value:"radio",label:"\u55AE\u9078",option:!0},{value:"checkbox",label:"\u591A\u9078",option:!0},{value:"true_false",label:"\u662F/\u5426",option:!1},{value:"date",label:"\u65E5\u671F",option:!1},{value:"datetime",label:"\u65E5\u671F\u6642\u9593",option:!1},{value:"email",label:"\u96FB\u90F5",option:!1},{value:"number",label:"\u6578\u503C",option:!1},{value:"richtext",label:"\u5BCC\u6587\u672C\u683C\u5F0F",option:!1},{value:"select",label:"\u4E0B\u62C9\u55AE",option:!0}],columns:[{title:"\u540D\u7A31",dataIndex:"field_name"},{title:"\u6A19\u7C3D",dataIndex:"field_label"},{title:"\u985E\u578B",dataIndex:"type"},{title:"\u5FC5\u586B",dataIndex:"required"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{field:{required:!0},label:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(){this.modal.data={},this.modal.data.form_id=this.form.id,this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(d){var e;this.modal.data={...d},this.modal.data.options=(e=JSON.parse(this.modal.data.options))!=null?e:[],this.modal.mode="EDIT",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("form.fields.store",{form:this.form.id}),this.modal.data,{onSuccess:d=>{this.modal.data={},this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log(d)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.patch(route("form.fields.update",{form:this.form.id,field:this.modal.data}),this.modal.data,{onSuccess:d=>{this.modal.data={},this.modal.isOpen=!1,console.log(d)},onError:d=>{console.log(d)}})}).catch(d=>{console.log("error",d)})},deleteRecord(d){!confirm("Are you sure want to remove?")||this.$inertia.delete(route("form.fields.destroy",{form:this.form.id,field:d.id}),{onSuccess:e=>{console.log("the field has been deleted!")},onError:e=>{alert(e.message)}})},addOptionItem(){this.modal.data.options.push({value:this.optionInput.value,label:this.optionInput.label}),console.log(this.modal.data.options)},deleteOptionItem(d){this.modal.data.options.splice(d,1),console.log(this.modal.data.options)}}},V={class:"p-8 pt-8"},F={class:"flex pb-2"},N=n("div",{class:"flex-auto w-1/2 font-semibold text-xl text-gray-800 truncate whitespace-nowrap"}," \u8868\u683C\u6B04\u4F4D\u7BA1\u7406 ",-1),B={class:"flex-auto w-1/2 text-right"},D={class:"card drop-shadow-md pt-4"},L={key:0,class:"space-x-2"},M={key:0},J=["onClick"];function X(d,e,x,j,l,s){const p=i("a-button"),k=i("a-table"),f=i("a-input"),r=i("a-form-item"),g=i("a-select"),C=i("a-switch"),I=i("a-textarea"),R=i("a-form"),w=i("a-modal"),O=i("AdminLayout");return m(),b(O,{title:"Dashboard"},{default:o(()=>[n("div",V,[n("div",F,[N,n("div",B,[a(p,{type:"primary",class:"!rounded",onClick:e[0]||(e[0]=t=>s.createRecord())},{default:o(()=>[u("\u65B0\u589E\u8CC7\u6599\u6B04\u4F4D")]),_:1})])]),n("div",D,[a(k,{dataSource:x.fields,columns:l.columns},{bodyCell:o(({column:t,text:h,record:v,index:z})=>[t.dataIndex=="operation"?(m(),c("div",L,[a(p,{onClick:E=>s.editRecord(v)},{default:o(()=>[u("\u4FEE\u6539")]),_:2},1032,["onClick"]),a(p,{onClick:E=>s.deleteRecord(v)},{default:o(()=>[u("\u522A\u9664")]),_:2},1032,["onClick"])])):_("",!0)]),_:1},8,["dataSource","columns"])]),a(w,{visible:l.modal.isOpen,"onUpdate:visible":e[10]||(e[10]=t=>l.modal.isOpen=t),title:l.modal.mode=="CREATE"?"\u65B0\u589E":"\u4FEE\u6539",width:"60%"},{footer:o(()=>[l.modal.mode=="EDIT"?(m(),b(p,{key:"Update",type:"primary",onClick:e[8]||(e[8]=t=>s.updateRecord())},{default:o(()=>[u("\u66F4\u65B0")]),_:1})):_("",!0),l.modal.mode=="CREATE"?(m(),b(p,{key:"Store",type:"primary",onClick:e[9]||(e[9]=t=>s.storeRecord())},{default:o(()=>[u("\u65B0\u589E")]),_:1})):_("",!0)]),default:o(()=>[a(R,{ref:"modalRef",model:l.modal.data,name:"Teacher","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",rules:l.rules,"validate-messages":l.validateMessages},{default:o(()=>[a(r,{label:"\u540D\u7A31",name:"field_name"},{default:o(()=>[a(f,{value:l.modal.data.field_name,"onUpdate:value":e[1]||(e[1]=t=>l.modal.data.field_name=t)},null,8,["value"])]),_:1}),a(r,{label:"\u6A19\u7C3D",name:"field_label"},{default:o(()=>[a(f,{value:l.modal.data.field_label,"onUpdate:value":e[2]||(e[2]=t=>l.modal.data.field_label=t)},null,8,["value"])]),_:1}),a(r,{label:"\u985E\u578B",name:"type"},{default:o(()=>[a(g,{value:l.modal.data.type,"onUpdate:value":e[3]||(e[3]=t=>l.modal.data.type=t),placeholder:"\u6B04\u4F4D\u985E\u578B",options:l.fieldTypes},null,8,["value","options"])]),_:1}),l.fieldTypes.find(t=>t.value==this.modal.data.type).option?(m(),c("span",M,[a(r,{label:"Options",name:"options"},{default:o(()=>[n("ol",null,[(m(!0),c(U,null,q(l.modal.data.options,(t,h)=>(m(),c("li",null,[u(y(t.value)+": "+y(t.label)+" ",1),n("a",{onClick:v=>s.deleteOptionItem(h)},"X",8,J)]))),256))])]),_:1}),a(r,{label:"Add"},{default:o(()=>[n("table",null,[n("tr",null,[n("td",null,[a(f,{value:l.optionInput.value,"onUpdate:value":e[4]||(e[4]=t=>l.optionInput.value=t)},null,8,["value"])]),n("td",null,[a(f,{value:l.optionInput.label,"onUpdate:value":e[5]||(e[5]=t=>l.optionInput.label=t)},null,8,["value"])]),n("td",null,[a(p,{type:"primary",onClick:s.addOptionItem},{default:o(()=>[u("Add")]),_:1},8,["onClick"])])])])]),_:1})])):_("",!0),a(r,{label:"\u5FC5\u586B",name:"require"},{default:o(()=>[a(C,{checked:l.modal.data.require,"onUpdate:checked":e[6]||(e[6]=t=>l.modal.data.require=t),unCheckedValue:0,checkedValue:1},null,8,["checked"])]),_:1}),a(r,{label:"\u5099\u6CE8",name:"remark"},{default:o(()=>[a(I,{value:l.modal.data.remark,"onUpdate:value":e[7]||(e[7]=t=>l.modal.data.remark=t)},null,8,["value"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])])]),_:1})}const W=A(S,[["render",X]]);export{W as default};
