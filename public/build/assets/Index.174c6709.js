import{_ as T}from"./AdminLayout.a967bfb7.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as D}from"./UploadOutlined.51045c55.js";import{R as q}from"./RestFilled.0825d20b.js";import{C as n,o as i,c as v,w as l,a as r,b as o,f as s,d as _,t as k,F as y,e as u}from"./app.c082a298.js";import"./UserOutlined.2068f525.js";import"./AppstoreOutlined.a785b156.js";const B={components:{AdminLayout:T,UploadOutlined:D,RestFilled:q},props:["forms"],data(){return{modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"\u540D\u7A31",dataIndex:"name"},{title:"\u6A19\u984C",dataIndex:"title"},{title:"\u5FC5\u9808\u767B\u9304",dataIndex:"for_account",key:"for_account"},{title:"\u5FC5\u9808\u6703\u54E1",dataIndex:"for_member",key:"for_member"},{title:"\u516C\u958B",dataIndex:"published",key:"published"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{name:{required:!0},title:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(d){this.modalDataReset(),this.modal.data.media=[],this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(d){this.modal.data={...d},this.modal.mode="EDIT",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.forms.store"),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log(d)})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("admin.forms.update",this.modal.data.id),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1,console.log(d)},onError:d=>{console.log(d)}})}).catch(d=>{console.log("error",d)})},modalDataReset(){this.modal.data={name:"",title:"",desctiption:"",for_account:0,for_member:0,published:0}},deleteRecord(d){this.$inertia.delete(route("admin.forms.destroy",{form:d.id}),{onSuccess:t=>{console.log(t)},onError:t=>{alert(t.message)}})}}},F={class:"p-8 pt-8"},H={class:"flex pb-2"},M=r("div",{class:"flex-auto w-1/2 font-semibold text-xl text-gray-800 truncate whitespace-nowrap"}," \u8868\u683C\u7BA1\u7406 ",-1),N={class:"flex-auto w-1/2 text-right"},L={class:"card drop-shadow-md pt-4"},z={key:3,class:"space-x-2"},P={key:0},Y=r("svg",{focusable:"false",class:"","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[r("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})],-1),j=["src"];function G(d,t,g,J,e,f){const c=n("a-button"),x=n("inertia-link"),C=n("a-popconfirm"),R=n("a-table"),h=n("a-input"),m=n("a-form-item"),w=n("a-textarea"),b=n("a-switch"),U=n("upload-outlined"),E=n("a-upload"),I=n("a-form"),V=n("a-modal"),A=n("AdminLayout");return i(),v(A,{title:"Dashboard"},{default:l(()=>[r("div",F,[r("div",H,[M,r("div",N,[o(c,{type:"primary",class:"!rounded",onClick:t[0]||(t[0]=a=>f.createRecord())},{default:l(()=>[s("\u65B0\u589E\u8868\u683C")]),_:1})])]),r("div",L,[o(R,{dataSource:g.forms,columns:e.columns},{bodyCell:l(({column:a,text:K,record:p,index:Q})=>[a.key==="published"?(i(),_(y,{key:0},[s(k(p.published===1?"\u516C\u958B":"\u672A\u516C\u958B"),1)],64)):u("",!0),a.key==="for_member"?(i(),_(y,{key:1},[s(k(p.for_member===1?"\u662F":"\u5426"),1)],64)):u("",!0),a.key==="for_account"?(i(),_(y,{key:2},[s(k(p.require_login===1?"\u662F":"\u5426"),1)],64)):u("",!0),a.dataIndex=="operation"?(i(),_("div",z,[o(x,{href:d.route("admin.forms.fields.index",{form:p.id}),class:"ant-btn"},{default:l(()=>[s("\u8CC7\u6599\u6B04\u4F4D")]),_:2},1032,["href"]),o(c,{onClick:O=>f.editRecord(p)},{default:l(()=>[s("\u4FEE\u6539")]),_:2},1032,["onClick"]),o(C,{title:"Are you sure delete this task?","ok-text":"Yes","cancel-text":"No",onConfirm:O=>f.deleteRecord(p),onCancel:d.cancel},{default:l(()=>[o(c,null,{default:l(()=>[s("\u522A\u9664")]),_:1})]),_:2},1032,["onConfirm","onCancel"])])):u("",!0)]),_:1},8,["dataSource","columns"])]),o(V,{visible:e.modal.isOpen,"onUpdate:visible":t[11]||(t[11]=a=>e.modal.isOpen=a),title:e.modal.mode=="CREATE"?"\u65B0\u589E":"\u4FEE\u6539",width:"60%"},{footer:l(()=>[e.modal.mode=="EDIT"?(i(),v(c,{key:"Update",type:"primary",onClick:t[9]||(t[9]=a=>f.updateRecord())},{default:l(()=>[s("\u66F4\u65B0")]),_:1})):u("",!0),e.modal.mode=="CREATE"?(i(),v(c,{key:"Store",type:"primary",onClick:t[10]||(t[10]=a=>f.storeRecord())},{default:l(()=>[s("\u65B0\u589E")]),_:1})):u("",!0)]),default:l(()=>[o(I,{ref:"modalRef",model:e.modal.data,name:"Teacher","label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:l(()=>[o(h,{type:"hidden",value:e.modal.data.id,"onUpdate:value":t[1]||(t[1]=a=>e.modal.data.id=a)},null,8,["value"]),o(m,{label:"\u540D\u7A31",name:"name"},{default:l(()=>[o(h,{value:e.modal.data.name,"onUpdate:value":t[2]||(t[2]=a=>e.modal.data.name=a)},null,8,["value"])]),_:1}),o(m,{label:"\u6A19\u984C",name:"title"},{default:l(()=>[o(h,{value:e.modal.data.title,"onUpdate:value":t[3]||(t[3]=a=>e.modal.data.title=a)},null,8,["value"])]),_:1}),o(m,{label:"\u63CF\u8FF0",name:"description"},{default:l(()=>[o(w,{value:e.modal.data.description,"onUpdate:value":t[4]||(t[4]=a=>e.modal.data.description=a)},null,8,["value"])]),_:1}),o(m,{label:"\u5FC5\u9808\u767B\u9304",name:"for_account"},{default:l(()=>[o(b,{checked:e.modal.data.for_account,"onUpdate:checked":t[5]||(t[5]=a=>e.modal.data.for_account=a),unCheckedValue:0,checkedValue:1},null,8,["checked"])]),_:1}),o(m,{label:"\u5FC5\u9808\u6703\u54E1",name:"for_member"},{default:l(()=>[o(b,{checked:e.modal.data.for_member,"onUpdate:checked":t[6]||(t[6]=a=>e.modal.data.for_member=a),unCheckedValue:0,checkedValue:1},null,8,["checked"])]),_:1}),o(m,{label:"\u516C\u958B",name:"published"},{default:l(()=>[o(b,{checked:e.modal.data.published,"onUpdate:checked":t[7]||(t[7]=a=>e.modal.data.published=a),unCheckedValue:0,checkedValue:1},null,8,["checked"])]),_:1}),o(m,{label:"\u6A6B\u5E45",name:"cert_logo"},{default:l(()=>[e.modal.data.media.length?(i(),_("div",P,[o(x,{href:d.route("admin.form-delete-media",e.modal.data.media[0].id),class:"float-right text-red-500"},{default:l(()=>[Y]),_:1},8,["href"]),r("img",{src:"/media/"+e.modal.data.media[0].id+"/"+e.modal.data.media[0].file_name},null,8,j)])):u("",!0),o(E,{"file-list":e.modal.data.image,"onUpdate:fileList":t[8]||(t[8]=a=>e.modal.data.image=a),multiple:!1,beforeUpload:()=>!1,"max-count":1,"list-type":"picture"},{default:l(()=>[o(c,null,{default:l(()=>[o(U),s(" upload ")]),_:1})]),_:1},8,["file-list","beforeUpload"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])])]),_:1})}const ae=S(B,[["render",G]]);export{ae as default};
