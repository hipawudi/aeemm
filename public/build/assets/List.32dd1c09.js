import{_ as I}from"./AdminLayout.c72fa573.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as n,D as i,o as p,c as g,w as s,a as b,b as o,f as d,d as y,t as z,F as O,e as f}from"./app.7f364e3c.js";import"./UserOutlined.1f8715dd.js";import"./AppstoreOutlined.bae1f559.js";const U={components:{AdminLayout:I},props:["members"],data(){return{columns:[{title:"\u59D3\u540D(\u4E2D\u6587)",dataIndex:"name_zh"},{title:"\u59D3\u540D(\u5916\u6587)",dataIndex:"name_en"},{title:"\u986F\u793A\u540D\u7A31",dataIndex:"display_name"},{title:"\u96FB\u5B50\u90F5\u7BB1",dataIndex:"email"},{title:"\u624B\u6A5F",dataIndex:"phone"},{title:"\u72C0\u614B",dataIndex:"state"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",width:300}],employmentStates:[{label:"\u6D3B\u8E8D",value:1},{label:"\u975E\u6D3B\u8E8D",value:2},{label:"\u9000\u6703",value:3}],modal:{isOpen:!1,data:{},title:"Modal",mode:""},pagination:{showSizeChanger:this.members.total>10?ture:!1,total:this.members.total,current:this.members.current_page,pageSize:this.members.per_page},filter:{},rules:{name_zh:{required:!0},mobile:{required:!0},state:{required:!0},email:{type:"email"}},validateMessages:{required:"\u8ACB\u8F93\u5165${label}",types:{email:"${label} \u4E0D\u662F\u6B63\u78BA\u7684\u90F5\u7BB1\u683C\u5F0F",number:"${label} \u4E0D\u662F\u6B63\u78BA\u7684\u6578\u5B57\u683C\u5F0F"},number:{range:"${label} \u5FC5\u9808\u5728${min}\u548C${max}\u4E4B\u9593"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(){this.modal.data={state:1},this.modal.mode="CREATE",this.modal.title="\u65B0\u589E\u6703\u54E1",this.modal.isOpen=!0},editRecord(t){console.log(t),this.modal.data={...t},this.modal.mode="EDIT",this.modal.title="\u4FEE\u6539",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.members.store"),this.modal.data,{onSuccess:t=>{this.modal.data={},this.modal.isOpen=!1,n.success("\u65B0\u589E\u6210\u529F")},onError:t=>{console.log(t),n.success("\u65B0\u589E\u5931\u6557")}})}).catch(t=>{console.log(t),n.success("\u65B0\u589E\u5931\u6557")})},updateRecord(){console.log(this.modal.data),this.$refs.modalRef.validateFields().then(()=>{this.$inertia.patch("/admin/members/"+this.modal.data.id,this.modal.data,{onSuccess:t=>{this.modal.data={},this.modal.isOpen=!1,n.success("\u4FEE\u6539\u6210\u529F")},onError:t=>{n.warning("\u4FEE\u6539\u5931\u6557")}})}).catch(t=>{console.log("error",t),n.success("\u65B0\u589E\u5931\u6557")})},deleteRecord(t){this.$inertia.delete("/admin/members/"+t,{onSuccess:e=>{console.log(e),n.success("\u522A\u9664\u6210\u529F")},onError:e=>{console.log(e),n.success("\u522A\u9664\u5931\u6557")}})},createLogin(t){t.email==null?n.warning("\u6B64\u6703\u54E1\u6C92\u6709\u96FB\u90F5\u4E0D\u80FD\u5EFA\u7ACB\u5E33\u865F"):this.$inertia.post(route("admin.members.createLogin"),{id:t.id},{onSuccess:e=>{n.success("\u767C\u9001\u9A57\u8B49\u90F5\u4EF6\u6210\u529F")},onError:e=>{console.log(e),n.success("\u767C\u9001\u9A57\u8B49\u90F5\u4EF6\u5931\u6557")}})},onPaginationChange(t,e,h){this.$inertia.get(route("admin.members.index"),{page:t.current,per_page:t.pageSize})}}},L={class:"p-8 pt-8"},T={class:"flex pb-2"},A=b("div",{class:"basis-1/2 font-semibold text-xl text-gray-800"},"\u6703\u54E1\u5217\u8868",-1),D={class:"basis-1/2 text-right"},q={class:"card drop-shadow-md pt-4"},B={key:1,class:"space-x-2"};function F(t,e,h,N,a,m){const r=i("a-button"),x=i("a-popconfirm"),C=i("a-table"),c=i("a-input"),u=i("a-form-item"),k=i("a-select"),R=i("a-form"),S=i("a-modal"),E=i("AdminLayout");return p(),g(E,{title:"Dashboard"},{default:s(()=>[b("div",L,[b("div",T,[A,b("div",D,[o(r,{onClick:e[0]||(e[0]=l=>m.createRecord()),type:"primary",class:"!rounded"},{default:s(()=>[d("\u65B0\u589E\u6703\u54E1")]),_:1})])]),b("div",q,[o(C,{dataSource:h.members.data,"text-right":"",columns:a.columns,pagination:a.pagination,onChange:m.onPaginationChange,ref:"dataTable"},{bodyCell:s(({column:l,text:V,record:_,index:M})=>[l.dataIndex=="state"?(p(),y(O,{key:0},[d(z(a.employmentStates.find(v=>v.value==_.state).label),1)],64)):f("",!0),l.dataIndex=="operation"?(p(),y("div",B,[o(r,{onClick:v=>m.editRecord(_)},{default:s(()=>[d("\u4FEE\u6539")]),_:2},1032,["onClick"]),o(x,{title:"\u662F\u5426\u78BA\u5B9A\u522A\u9664\u9019\u500B\u6210\u54E1","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:v=>m.deleteRecord(_.id)},{default:s(()=>[o(r,null,{default:s(()=>[d("\u522A\u9664")]),_:1})]),_:2},1032,["onConfirm"]),_.user?f("",!0):(p(),g(r,{key:0,onClick:v=>m.createLogin(_)},{default:s(()=>[d("\u5EFA\u7ACB\u5E33\u865F")]),_:2},1032,["onClick"]))])):f("",!0)]),_:1},8,["dataSource","columns","pagination","onChange"])]),o(S,{visible:a.modal.isOpen,"onUpdate:visible":e[10]||(e[10]=l=>a.modal.isOpen=l),title:a.modal.title,width:"60%"},{footer:s(()=>[o(r,{key:"back",onClick:e[7]||(e[7]=l=>a.modal.isOpen=!1)},{default:s(()=>[d("\u53D6\u6D88")]),_:1}),a.modal.mode=="EDIT"?(p(),g(r,{key:"Update",type:"primary",onClick:e[8]||(e[8]=l=>m.updateRecord())},{default:s(()=>[d("\u4E0A\u50B3")]),_:1})):f("",!0),a.modal.mode=="CREATE"?(p(),g(r,{key:"Store",type:"primary",onClick:e[9]||(e[9]=l=>m.storeRecord())},{default:s(()=>[d("\u65B0\u589E")]),_:1})):f("",!0)]),default:s(()=>[o(R,{ref:"modalRef",model:a.modal.data,name:"Teacher","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",rules:a.rules,"validate-messages":a.validateMessages},{default:s(()=>[o(u,{label:"\u59D3\u540D(\u4E2D\u6587)",name:"name_zh"},{default:s(()=>[o(c,{value:a.modal.data.name_zh,"onUpdate:value":e[1]||(e[1]=l=>a.modal.data.name_zh=l)},null,8,["value"])]),_:1}),o(u,{label:"\u59D3\u540D(\u5916\u6587)",name:"name_en"},{default:s(()=>[o(c,{value:a.modal.data.name_en,"onUpdate:value":e[2]||(e[2]=l=>a.modal.data.name_en=l)},null,8,["value"])]),_:1}),o(u,{label:"\u986F\u793A\u540D\u7A31",name:"display_name"},{default:s(()=>[o(c,{value:a.modal.data.display_name,"onUpdate:value":e[3]||(e[3]=l=>a.modal.data.display_name=l)},null,8,["value"])]),_:1}),o(u,{label:"\u96FB\u5B50\u90F5\u7BB1",name:"email"},{default:s(()=>[o(c,{value:a.modal.data.email,"onUpdate:value":e[4]||(e[4]=l=>a.modal.data.email=l)},null,8,["value"])]),_:1}),o(u,{label:"\u624B\u6A5F",name:"phone"},{default:s(()=>[o(c,{value:a.modal.data.phone,"onUpdate:value":e[5]||(e[5]=l=>a.modal.data.phone=l)},null,8,["value"])]),_:1}),o(u,{label:"\u72C0\u614B",name:"state"},{default:s(()=>[o(k,{value:a.modal.data.state,"onUpdate:value":e[6]||(e[6]=l=>a.modal.data.state=l),options:a.employmentStates},null,8,["value","options"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])])]),_:1})}const K=w(U,[["render",F]]);export{K as default};
