import{_ as T}from"./AdminLayout.ac01458f.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as A}from"./UploadOutlined.64b150c4.js";import{C as i,o as m,c as b,w as l,a as _,b as o,f as n,d as f,t as x,F as y,e as g}from"./app.90505b66.js";import"./UserOutlined.37ab7436.js";import"./AppstoreOutlined.e0323390.js";const S={components:{AdminLayout:T,UploadOutlined:A},props:["professionals","certificates","members"],data(){return{dateFormat:"YYYY-MM-DD",modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"\u5C08\u696D\u8A8D\u8B49",dataIndex:"cert_title",model:"certificate"},{title:"\u6210\u54E1\u540D\u7A31",dataIndex:"display_name",model:"member"},{title:"\u8A8D\u8B49\u540D\u7247\u865F\u78BC",dataIndex:"number_display"},{title:"\u7C3D\u767C\u65E5\u671F",dataIndex:"issue_date"},{title:"\u6709\u6548\u671F\u81EA",dataIndex:"valid_from"},{title:"\u6709\u6548\u671F\u81F3",dataIndex:"valid_until"},{title:"\u6388\u6B0A\u4EBA",dataIndex:"authorize_by"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{name_zh:{required:!0},mobile:{required:!0},state:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(d){this.modal.data={},this.modal.data.media=[],this.modal.data.certificate={},this.modal.data.member={},this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(d){this.modal.data={...d},this.modal.mode="EDIT",this.modal.title="\u4FEE\u6539",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.professionals.store"),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log(d)})},updateRecord(){this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("admin.professionals.update",this.modal.data.id),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log("error",d)})},deleteRecord(d){this.$inertia.delete("/admin/professionals/"+d,{onSuccess:a=>{console.log(a)},onError:a=>{console.log(a)}})}}},D={class:"p-8 pt-8"},q={class:"flex pb-2"},z=_("div",{class:"basis-1/2 font-semibold text-xl text-gray-800"},"\u5C08\u696D\u8B49\u66F8",-1),M={class:"basis-1/2 text-right"},B={class:"card drop-shadow-md pt-4"},N={key:0,class:"space-x-2"};function V(d,a,c,Y,e,r){const u=i("a-button"),C=i("a-popconfirm"),F=i("a-table"),h=i("a-select"),s=i("a-form-item"),k=i("a-input"),v=i("a-date-picker"),R=i("a-textarea"),I=i("a-form"),E=i("a-modal"),U=i("AdminLayout");return m(),b(U,{title:"Dashboard"},{default:l(()=>[_("div",D,[_("div",q,[z,_("div",M,[o(u,{onClick:a[0]||(a[0]=t=>r.createRecord()),type:"primary",class:"!rounded"},{default:l(()=>[n("\u65B0\u589E\u5C08\u696D\u8B49\u66F8")]),_:1})])]),_("div",B,[o(F,{dataSource:c.professionals,columns:e.columns},{bodyCell:l(({column:t,text:L,record:p,index:P})=>[t.dataIndex=="operation"?(m(),f("div",N,[o(u,{onClick:O=>r.editRecord(p)},{default:l(()=>[n("\u4FEE\u6539")]),_:2},1032,["onClick"]),o(C,{title:"\u662F\u5426\u78BA\u5B9A\u522A\u9664\u9019\u500B\u5C08\u696D\u8B49\u66F8","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:O=>r.deleteRecord(p.id)},{default:l(()=>[o(u,null,{default:l(()=>[n("\u522A\u9664")]),_:1})]),_:2},1032,["onConfirm"])])):t.model=="member"?(m(),f(y,{key:1},[n(x(p.member[t.dataIndex]),1)],64)):t.model=="certificate"?(m(),f(y,{key:2},[n(x(p.certificate[t.dataIndex]),1)],64)):(m(),f(y,{key:3},[n(x(p[t.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])]),o(E,{visible:e.modal.isOpen,"onUpdate:visible":a[11]||(a[11]=t=>e.modal.isOpen=t),title:e.modal.mode=="CREATE"?"\u65B0\u589E":"\u4FEE\u6539",width:"60%"},{footer:l(()=>[e.modal.mode=="EDIT"?(m(),b(u,{key:"Update",type:"primary",onClick:a[9]||(a[9]=t=>r.updateRecord())},{default:l(()=>[n("\u66F4\u65B0")]),_:1})):g("",!0),e.modal.mode=="CREATE"?(m(),b(u,{key:"Store",type:"primary",onClick:a[10]||(a[10]=t=>r.storeRecord())},{default:l(()=>[n("\u65B0\u589E")]),_:1})):g("",!0)]),default:l(()=>[o(I,{ref:"modalRef",model:e.modal.data,name:"Teacher","label-col":{span:4},"wrapper-col":{span:24},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:l(()=>[o(s,{label:"\u5C08\u696D\u8A8D\u8B49",name:"certificate_id"},{default:l(()=>[o(h,{value:e.modal.data.certificate_id,"onUpdate:value":a[1]||(a[1]=t=>e.modal.data.certificate_id=t),options:c.certificates,"field-names":{label:"cert_title",value:"id"}},null,8,["value","options"])]),_:1}),o(s,{label:"\u6210\u54E1\u540D\u7A31",name:"member_id"},{default:l(()=>[o(h,{value:e.modal.data.member_id,"onUpdate:value":a[2]||(a[2]=t=>e.modal.data.member_id=t),options:c.members,"field-names":{label:"display_name",value:"id"}},null,8,["value","options"])]),_:1}),o(s,{label:"\u8A8D\u8B49\u540D\u7247\u865F\u78BC",name:"number_display"},{default:l(()=>[o(k,{value:e.modal.data.number_display,"onUpdate:value":a[3]||(a[3]=t=>e.modal.data.number_display=t)},null,8,["value"])]),_:1}),o(s,{label:"\u7C3D\u767C\u65E5\u671F",name:"issue_date"},{default:l(()=>[o(v,{value:e.modal.data.issue_date,"onUpdate:value":a[4]||(a[4]=t=>e.modal.data.issue_date=t),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),o(s,{label:"\u6709\u6548\u671F\u81EA",name:"valid_from"},{default:l(()=>[o(v,{value:e.modal.data.valid_from,"onUpdate:value":a[5]||(a[5]=t=>e.modal.data.valid_from=t),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),o(s,{label:"\u6709\u6548\u671F\u81F3",name:"valid_until"},{default:l(()=>[o(v,{value:e.modal.data.valid_until,"onUpdate:value":a[6]||(a[6]=t=>e.modal.data.valid_until=t),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),o(s,{label:"\u6388\u6B0A\u4EBA",name:"authorize_by"},{default:l(()=>[o(k,{value:e.modal.data.authorize_by,"onUpdate:value":a[7]||(a[7]=t=>e.modal.data.authorize_by=t)},null,8,["value"])]),_:1}),o(s,{label:"\u5099\u8A3B",name:"remark"},{default:l(()=>[o(R,{value:e.modal.data.remark,"onUpdate:value":a[8]||(a[8]=t=>e.modal.data.remark=t)},null,8,["value"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])])]),_:1})}const W=w(S,[["render",V]]);export{W as default};
