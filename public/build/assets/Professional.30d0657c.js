import{_ as O}from"./AdminLayout.b1278d3d.js";import{_ as T}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as A}from"./UploadOutlined.e038a453.js";import{D as d,o as _,c as y,w as l,a as r,b as o,f as m,d as x,e as v,t as h,F as C}from"./app.8d6b5d0d.js";import"./UserOutlined.74c238c8.js";import"./AppstoreOutlined.5537e5f8.js";const q={components:{AdminLayout:O,UploadOutlined:A},props:["professionals","certificates","members"],data(){return{dateFormat:"YYYY-MM-DD",modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"\u5C08\u696D\u8A8D\u8B49",dataIndex:"cert_title",key:"certificate"},{title:"\u6210\u54E1\u540D\u7A31",dataIndex:"display_name",key:"member"},{title:"\u8A8D\u8B49\u540D\u7247\u865F\u78BC",dataIndex:"number_display",key:"number_display"},{title:"\u7C3D\u767C\u65E5\u671F",dataIndex:"issue_date"},{title:"\u6709\u6548\u671F\u81EA",dataIndex:"valid_from"},{title:"\u6709\u6548\u671F\u81F3",dataIndex:"valid_until"},{title:"\u6388\u6B0A\u4EBA",dataIndex:"authorize_by"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{certificate_id:{required:!0},member_id:{required:!0},issue_date:{required:!0},authorize_by:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(i){this.modal.data={},this.modal.data.media=[],this.modal.data.certificate={},this.modal.data.member={},this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(i){this.modal.data={...i},this.modal.mode="EDIT",this.modal.title="\u4FEE\u6539",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.professionals.store"),this.modal.data,{preserveState:!1,onSuccess:i=>{this.modal.isOpen=!1},onError:i=>{console.log(i)}})}).catch(i=>{console.log(i)})},updateRecord(){this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("admin.professionals.update",this.modal.data.id),this.modal.data,{preserveState:!1,onSuccess:i=>{this.modal.isOpen=!1},onError:i=>{console.log(i)}})}).catch(i=>{console.log("error",i)})},deleteRecord(i){this.$inertia.delete("/admin/professionals/"+i,{preserveState:!1,onSuccess:t=>{console.log(t)},onError:t=>{console.log(t)}})}}},z={class:"md:p-8 pt-8"},D={class:"flex pb-2"},M=r("div",{class:"flex-auto w-1/2 font-semibold text-xl text-gray-800 truncate whitespace-nowrap"},"\u5C08\u696D\u8B49\u66F8",-1),B={class:"basis-1/2 text-right"},N={class:"container mx-auto pt-5"},V={class:"bg-white relative shadow rounded-lg overflow-x-auto"},Y={key:0,class:"space-x-2"},L={class:"flex gap-2 items-center"},P={class:"flex-initial"},H={class:"flex-auto"};function j(i,t,u,G,e,c){const f=d("a-button"),R=d("a-popconfirm"),w=d("a-table"),k=d("a-select"),n=d("a-form-item"),g=d("a-input"),b=d("a-date-picker"),E=d("a-textarea"),U=d("a-form"),I=d("a-modal"),S=d("AdminLayout");return _(),y(S,{title:"\u5C08\u696D\u8A8D\u8B49"},{default:l(()=>[r("div",z,[r("div",D,[M,r("div",B,[o(f,{onClick:t[0]||(t[0]=a=>c.createRecord()),type:"primary",class:"!rounded"},{default:l(()=>[m("\u65B0\u589E\u5C08\u696D\u8B49\u66F8")]),_:1})])]),r("div",N,[r("div",V,[o(w,{dataSource:u.professionals,columns:e.columns},{bodyCell:l(({column:a,record:s})=>{var F;return[a.dataIndex=="operation"?(_(),x("div",Y,[o(f,{onClick:p=>c.editRecord(s)},{default:l(()=>[m("\u4FEE\u6539")]),_:2},1032,["onClick"]),o(R,{title:"\u662F\u5426\u78BA\u5B9A\u522A\u9664\u9019\u500B\u5C08\u696D\u8B49\u66F8","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:p=>c.deleteRecord(s.id)},{default:l(()=>[o(f,null,{default:l(()=>[m("\u522A\u9664")]),_:1})]),_:2},1032,["onConfirm"])])):v("",!0),a.key=="number_display"?(_(),x(C,{key:1},[m(h(((F=u.certificates.find(p=>p.id==s.certificate_id))==null?void 0:F.number_format)+s.number_display),1)],64)):v("",!0),a.key=="certificate"?(_(),x(C,{key:2},[m(h(u.certificates.find(p=>p.id==s.certificate_id).cert_title),1)],64)):v("",!0)]}),_:1},8,["dataSource","columns"])])]),o(I,{visible:e.modal.isOpen,"onUpdate:visible":t[11]||(t[11]=a=>e.modal.isOpen=a),title:e.modal.mode=="CREATE"?"\u65B0\u589E":"\u4FEE\u6539",width:"60%"},{footer:l(()=>[e.modal.mode=="EDIT"?(_(),y(f,{key:"Update",type:"primary",onClick:t[9]||(t[9]=a=>c.updateRecord())},{default:l(()=>[m("\u66F4\u65B0")]),_:1})):v("",!0),e.modal.mode=="CREATE"?(_(),y(f,{key:"Store",type:"primary",onClick:t[10]||(t[10]=a=>c.storeRecord())},{default:l(()=>[m("\u65B0\u589E")]),_:1})):v("",!0)]),default:l(()=>[o(U,{ref:"modalRef",model:e.modal.data,name:"Teacher","label-col":{span:4},"wrapper-col":{span:24},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:l(()=>[o(n,{label:"\u5C08\u696D\u8A8D\u8B49",name:"certificate_id"},{default:l(()=>[o(k,{value:e.modal.data.certificate_id,"onUpdate:value":t[1]||(t[1]=a=>e.modal.data.certificate_id=a),options:u.certificates,"field-names":{label:"cert_title",value:"id"}},null,8,["value","options"])]),_:1}),o(n,{label:"\u6210\u54E1\u540D\u7A31",name:"member_id"},{default:l(()=>[o(k,{value:e.modal.data.member_id,"onUpdate:value":t[2]||(t[2]=a=>e.modal.data.member_id=a),options:u.members,"field-names":{label:"name_zh",value:"id"}},null,8,["value","options"])]),_:1}),o(n,{label:"\u8B49\u66F8\u865F\u78BC",name:"number_display"},{default:l(()=>{var a;return[r("div",L,[r("div",P,h((a=u.certificates.find(s=>s.id==e.modal.data.certificate_id))==null?void 0:a.number_format),1),r("div",H,[o(g,{value:e.modal.data.number_display,"onUpdate:value":t[3]||(t[3]=s=>e.modal.data.number_display=s)},null,8,["value"])])])]}),_:1}),o(n,{label:"\u7C3D\u767C\u65E5\u671F",name:"issue_date"},{default:l(()=>[o(b,{value:e.modal.data.issue_date,"onUpdate:value":t[4]||(t[4]=a=>e.modal.data.issue_date=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),o(n,{label:"\u6709\u6548\u671F\u81EA",name:"valid_from"},{default:l(()=>[o(b,{value:e.modal.data.valid_from,"onUpdate:value":t[5]||(t[5]=a=>e.modal.data.valid_from=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),o(n,{label:"\u6709\u6548\u671F\u81F3",name:"valid_until"},{default:l(()=>[o(b,{value:e.modal.data.valid_until,"onUpdate:value":t[6]||(t[6]=a=>e.modal.data.valid_until=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),o(n,{label:"\u6388\u6B0A\u4EBA",name:"authorize_by"},{default:l(()=>[o(g,{value:e.modal.data.authorize_by,"onUpdate:value":t[7]||(t[7]=a=>e.modal.data.authorize_by=a)},null,8,["value"])]),_:1}),o(n,{label:"\u5099\u8A3B",name:"remark"},{default:l(()=>[o(E,{value:e.modal.data.remark,"onUpdate:value":t[8]||(t[8]=a=>e.modal.data.remark=a)},null,8,["value"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])])]),_:1})}const $=T(q,[["render",j]]);export{$ as default};
