import{_ as z}from"./AdminLayout.a967bfb7.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{U as w}from"./UploadOutlined.51045c55.js";import{C as i,o as n,c as v,w as o,a as s,b as l,f as r,d as c,t as h,F as x,e as k}from"./app.c082a298.js";import"./UserOutlined.2068f525.js";import"./AppstoreOutlined.a785b156.js";const M={components:{AdminLayout:z,UploadOutlined:w},props:["professionals","certificates","members"],data(){return{dateFormat:"YYYY-MM-DD",modal:{isOpen:!1,data:{},title:"Modal",mode:""},columns:[{title:"Certificate Title",dataIndex:"cert_title",model:"certificate"},{title:"Member name",dataIndex:"display_name",model:"member"},{title:"\u59D3\u540D(card name)",dataIndex:"display_name"},{title:"Card number",dataIndex:"number_display"},{title:"Issue Date",dataIndex:"issue_date"},{title:"Valid from",dataIndex:"valid_from"},{title:"Valid Until",dataIndex:"valid_until"},{title:"Auhorize by",dataIndex:"authorize_by"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation"}],rules:{name_zh:{required:!0},mobile:{required:!0},state:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},labelCol:{style:{width:"150px"}}}},created(){},methods:{createRecord(d){this.modal.data={},this.modal.data.media=[],this.modal.data.certificate={},this.modal.data.member={},this.modal.mode="CREATE",this.modal.isOpen=!0},editRecord(d){this.modal.data={...d},this.modal.mode="EDIT",this.modal.title="\u4FEE\u6539",this.modal.isOpen=!0},storeRecord(){this.$refs.modalRef.validateFields().then(()=>{this.$inertia.post(route("admin.certificates.store"),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log(d)})},updateRecord(){this.$refs.modalRef.validateFields().then(()=>{this.modal.data._method="PATCH",this.$inertia.post(route("admin.certificates.update",this.modal.data.id),this.modal.data,{onSuccess:d=>{this.modal.isOpen=!1},onError:d=>{console.log(d)}})}).catch(d=>{console.log("error",d)})}}},O=s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"\u5C08\u696D\u8A8D\u8B49",-1),V={key:0},N=s("svg",{focusable:"false",class:"","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",viewBox:"64 64 896 896"},[s("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})],-1),S=["src"];function q(d,t,b,B,e,u){const p=i("a-button"),I=i("a-table"),g=i("a-select"),m=i("a-form-item"),f=i("a-input"),y=i("a-date-picker"),C=i("a-textarea"),U=i("inertia-link"),F=i("upload-outlined"),R=i("a-upload"),E=i("a-form"),D=i("a-modal"),T=i("AdminLayout");return n(),v(T,{title:"Dashboard"},{header:o(()=>[O]),default:o(()=>[s("button",{onClick:t[0]||(t[0]=a=>u.createRecord()),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-3"}," \u65B0\u589E\u5C08\u696D\u8A8D\u8B49 "),l(I,{dataSource:b.professionals,columns:e.columns},{bodyCell:o(({column:a,text:H,record:_,index:L})=>[a.dataIndex=="operation"?(n(),v(p,{key:0,onClick:Y=>u.editRecord(_)},{default:o(()=>[r("\u4FEE\u6539")]),_:2},1032,["onClick"])):a.model=="member"?(n(),c(x,{key:1},[r(h(_.member[a.dataIndex]),1)],64)):a.model=="certificate"?(n(),c(x,{key:2},[r(h(_.certificate[a.dataIndex]),1)],64)):(n(),c(x,{key:3},[r(h(_[a.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"]),l(D,{visible:e.modal.isOpen,"onUpdate:visible":t[14]||(t[14]=a=>e.modal.isOpen=a),title:e.modal.mode=="CREATE"?"\u65B0\u589E":"\u4FEE\u6539",width:"60%"},{footer:o(()=>[e.modal.mode=="EDIT"?(n(),v(p,{key:"Update",type:"primary",onClick:t[12]||(t[12]=a=>u.updateRecord())},{default:o(()=>[r("\u66F4\u65B0")]),_:1})):k("",!0),e.modal.mode=="CREATE"?(n(),v(p,{key:"Store",type:"primary",onClick:t[13]||(t[13]=a=>u.storeRecord())},{default:o(()=>[r("\u65B0\u589E")]),_:1})):k("",!0)]),default:o(()=>[l(E,{ref:"modalRef",model:e.modal.data,name:"Teacher","label-col":{span:4},"wrapper-col":{span:24},autocomplete:"off",rules:e.rules,"validate-messages":e.validateMessages},{default:o(()=>[l(m,{label:"Certificate Title",name:"certificate_id"},{default:o(()=>[l(g,{value:e.modal.data.certificate_id,"onUpdate:value":t[1]||(t[1]=a=>e.modal.data.certificate_id=a),options:b.certificates,"field-names":{label:"cert_title",value:"id"},disabled:e.modal.mode=="EDIT"},null,8,["value","options","disabled"])]),_:1}),l(m,{label:"Display Name",name:"member_id"},{default:o(()=>[l(g,{value:e.modal.data.member_id,"onUpdate:value":t[2]||(t[2]=a=>e.modal.data.member_id=a),options:b.members,"field-names":{label:"display_name",value:"id"},disabled:e.modal.mode=="EDIT"},null,8,["value","options","disabled"])]),_:1}),l(m,{label:"Display Number",name:"number_display"},{default:o(()=>[l(f,{value:e.modal.data.number_display,"onUpdate:value":t[3]||(t[3]=a=>e.modal.data.number_display=a),disabled:e.modal.mode=="EDIT"},null,8,["value","disabled"])]),_:1}),l(m,{label:"Issue Date",name:"issue_date"},{default:o(()=>[l(y,{value:e.modal.data.issue_date,"onUpdate:value":t[4]||(t[4]=a=>e.modal.data.issue_date=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),l(m,{label:"Valid From",name:"valid_from"},{default:o(()=>[l(y,{value:e.modal.data.valid_from,"onUpdate:value":t[5]||(t[5]=a=>e.modal.data.valid_from=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),l(m,{label:"Valid Until",name:"valid_until"},{default:o(()=>[l(y,{value:e.modal.data.valid_until,"onUpdate:value":t[6]||(t[6]=a=>e.modal.data.valid_until=a),format:e.dateFormat,valueFormat:e.dateFormat},null,8,["value","format","valueFormat"])]),_:1}),l(m,{label:"Authorize by",name:"authorize_by"},{default:o(()=>[l(f,{value:e.modal.data.authorize_by,"onUpdate:value":t[7]||(t[7]=a=>e.modal.data.authorize_by=a)},null,8,["value"])]),_:1}),l(m,{label:"Rank",name:"rank"},{default:o(()=>[l(f,{value:e.modal.data.rank,"onUpdate:value":t[8]||(t[8]=a=>e.modal.data.rank=a)},null,8,["value"])]),_:1}),l(m,{label:"Extra",name:"extra"},{default:o(()=>[l(f,{value:e.modal.data.extra,"onUpdate:value":t[9]||(t[9]=a=>e.modal.data.extra=a)},null,8,["value"])]),_:1}),l(m,{label:"Remark",name:"remark"},{default:o(()=>[l(C,{value:e.modal.data.remark,"onUpdate:value":t[10]||(t[10]=a=>e.modal.data.remark=a)},null,8,["value"])]),_:1}),l(m,{label:"Avata",name:"avata"},{default:o(()=>[e.modal.data.media.length?(n(),c("div",V,[l(U,{href:d.route("admin.certificate-delete-media",e.modal.data.media[0].id),class:"float-right text-red-500"},{default:o(()=>[N]),_:1},8,["href"]),s("img",{src:"/media/"+e.modal.data.media[0].id+"/"+e.modal.data.media[0].file_name},null,8,S)])):k("",!0),l(R,{"file-list":e.modal.data.avata,"onUpdate:fileList":t[11]||(t[11]=a=>e.modal.data.avata=a),multiple:!1,beforeUpload:()=>!1,"max-count":1,"list-type":"picture"},{default:o(()=>[l(p,null,{default:o(()=>[l(F),r(" upload ")]),_:1})]),_:1},8,["file-list","beforeUpload"])]),_:1})]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["visible","title"])]),_:1})}const W=A(M,[["render",q]]);export{W as default};
